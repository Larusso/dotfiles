ControlMaster auto
ControlPath /tmp/ssh_mux_%h_%p_%r
ControlPersist 60m
IgnoreUnknown UseKeychain

{% if yadm.hostname == "mw-mendres-JYJJ" %}
Host 10.103.36.* 10.103.37.* 10.103.38.* 10.103.39.* *.macfarm.dub *.dub
  User jenkins_agent
  Port 22
  StrictHostKeyChecking no
  UserKnownHostsFile /dev/null
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
  IdentitiesOnly yes
  IdentityFile ~/.ssh/keys/work-ed25519.pub
{% endif %}

Host github.com
{% if yadm.os == "Darwin" %}
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
{% endif %}
{% if yadm.os == "Linux" %}
  IdentityAgent "~/.1password/agent.sock"
{% endif %}
  IdentitiesOnly yes
  IdentityFile ~/.ssh/keys/github-ed25519.pub
  IdentityFile ~/.ssh/keys/id_ed25519_sk_rk_github_private
  IdentityFile ~/.ssh/keys/id_ed25519_sk_rk_github_wooga

Host 192.168.8.1
{% if yadm.os == "Darwin" %}
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
{% endif %}
{% if yadm.os == "Linux" %}
  IdentityAgent "~/.1password/agent.sock"
{% endif %}

{% if yadm.hostname == "arch-ripper" %}
Host gitlab.com
  IdentityFile ~/.ssh/id_ed25519
  IdentitiesOnly yes
Host aur.archlinux.org
  IdentityFile ~/.ssh/id_aur
  IdentitiesOnly yes
  User aur
{% endif %}

Host *
  ForwardAgent no
  Compression no
  ServerAliveInterval 0
  ServerAliveCountMax 3
  HashKnownHosts no
  UserKnownHostsFile ~/.ssh/known_hosts
  ControlMaster no
  ControlPath ~/.ssh/master-%r@%n:%p
  ControlPersist no

  AddKeysToAgent yes
  UseKeychain yes